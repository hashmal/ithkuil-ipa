var f=Object.defineProperty,u=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,i=(r,e,t)=>e in r?f(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,s=(r,e)=>{for(var t in e||(e={}))x.call(e,t)&&i(r,t,e[t]);if(u)for(var t of u(e))d.call(e,t)&&i(r,t,e[t]);return r},b=["p","b","m","t","d","n","k","g","ň","ʼ","f","v","ţ","ḑ","s","z","c","ẓ","š","ž","č","j","ç","x","h","ļ","w","r","y","ř","l"],_=["i","ü","u","e","ö","ë","o","ä","a"],E=["í","û","ú","é","ô","ê","ó","â","á"],C=_.join(""),v=E.join("");function n(r){return _.indexOf(r(1))>=0}function g(r){return b.indexOf(r(1))>=0}var O={" ":(r,e)=>" ","-":(r,e)=>"-",a:(r,e)=>"a",ä:(r,e)=>"æ",e:(r,e)=>n(e)?"e":"ɛ",ë:(r,e)=>"ʌ",i:(r,e)=>n(e)?"i":r(1)==="y"||e(1)==="y"?"ɪ":"i",o:(r,e)=>n(e)?"o":"ɔ",ö:(r,e)=>n(e)?"ø":"œ",u:(r,e)=>n(e)?"u":r(1)==="w"||e(1)==="w"?"ʊ":"u",ü:(r,e)=>"yw".indexOf(r(1))>=0&&r(1).length>0?"ʉ":"y",p:(r,e)=>"p",k:(r,e)=>"k",t:(r,e)=>"t̪",d:(r,e)=>"d̪",g:(r,e)=>"g",h:(r,e)=>e(1)===""&&"ptkcč".split("").includes(r(1))?"ʰ":"h",ʼ:(r,e)=>"Ɂ",ţ:(r,e)=>"θ",ḑ:(r,e)=>"ð",š:(r,e)=>"ʃ",ž:(r,e)=>"ʒ",ç:(r,e)=>"ç",x:(r,e)=>"x",l:(r,e)=>"l̪",ļ:(r,e)=>"ɬ",c:(r,e)=>"ts",ẓ:(r,e)=>"dz",č:(r,e)=>"tʃ",j:(r,e)=>"dʒ",n:(r,e)=>{const t=e(1);return t==="ř"?"n":"kgx".split("").includes(t)?"ŋ":"n"},ň:(r,e)=>"ŋ",r:(r,e)=>g(e)?"ɹ":"ɾ",ř:(r,e)=>"ʁ",y:(r,e)=>"j",b:(r,e)=>"b",f:(r,e)=>"f",m:(r,e)=>"m",s:(r,e)=>"s",v:(r,e)=>"v",w:(r,e)=>"w",z:(r,e)=>"z"},o=class extends Error{constructor(r,e){super(r),this.details=e}get name(){return"IpaConversionError"}},S="́",m=class{constructor(r,e){this.DEFAULT_OPTIONS={stressMarks:"accent",brackets:!0,wordInitialGlottalStop:!1},this.index=0,this.text=B(r),this.options=s(s({},this.DEFAULT_OPTIONS),e??{})}textToIpa(){var r;let e="";for(this.index=0;this.index<this.text.length;this.index++){const c=this.text[this.index],{character:h,stressed:p}=w(c);let l;try{l=this.lookupCharacterMatcher(h)}catch(a){if(a instanceof Error)return a}try{e+=this.matchCharacter(l),((r=this.options)==null?void 0:r.stressMarks)==="accent"&&p&&(e+=S)}catch(a){if(a instanceof Error)return a}}let t=I(e).normalize();return this.options.wordInitialGlottalStop&&(t=k(t)),this.optionalBrackets(t)}lookupCharacterMatcher(r){const e=O[r];if(typeof e!="function")throw new o(this.failureMessage,{cause:"no matcher found"});return e}matchCharacter(r){const e=r(this.lookBehind(),this.lookAhead());if(e)return e;throw new o(this.failureMessage,{cause:"incomplete rules"})}optionalBrackets(r){return this.options.brackets?`[${r}]`:r}lookAhead(){return r=>this.text.slice(this.index+1,this.index+1+r)}lookBehind(){return r=>this.text.slice(this.index-r,this.index)}get failureMessage(){return`failed at index ${this.index}:
${this.text}
`+"-".repeat(this.index)+"^"}};function w(r){const e=v.indexOf(r);return e<0?{character:r,stressed:!1}:{character:C[e],stressed:!0}}function B(r){return r.toLowerCase().replace(/\.|,/g," ").replace(/\s+/g," ").replace(/^\s+/,"").replace(/\s+$/,"").replace(/'/,"ʼ")}function I(r){return r.replace(new RegExp("(.)(?<!\\1.)\\1(?!\\1)","g"),"$1ː").replace(/ɹɾ/g,"ʀ").replace(/ʁʁ/g,"ʁː")}function k(r){const e=/^a/;return r.replace(e,"ʔa")}function y(r,e){return new m(r,e).textToIpa()}export{o as IpaConversionError,m as IpaConverter,y as romanizedIthkuilToIpa};
